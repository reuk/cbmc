# Library
file(GLOB_RECURSE sources "*.cpp")
file(GLOB_RECURSE headers "*.h")
list(REMOVE_ITEM sources
    ${CMAKE_CURRENT_SOURCE_DIR}/goto_cc_main.cpp

    # These files don't build
    ${CMAKE_CURRENT_SOURCE_DIR}/xml_binaries/read_goto_object.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/xml_binaries/xml_goto_function.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/xml_binaries/xml_goto_function_hashing.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/xml_binaries/xml_goto_program.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/xml_binaries/xml_goto_program_hashing.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/xml_binaries/xml_irep_hashing.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/xml_binaries/xml_symbol_hashing.cpp
)
add_library(goto-cc-lib ${sources} ${headers})
cotire(goto-cc-lib)

generic_includes(goto-cc-lib)

target_link_libraries(goto-cc-lib
    big-int
    goto-programs
    util
    linking
    ansi-c
    cpp
    xml
    assembler
    langapi
)

add_if_library(goto-cc-lib java_bytecode)
add_if_library(goto-cc-lib jsil)

# Executable
add_executable(goto-cc goto_cc_main.cpp)
cotire(goto-cc)
target_link_libraries(goto-cc goto-cc-lib)
